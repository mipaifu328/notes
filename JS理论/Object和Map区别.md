## Object 与 Map 区别

### 用法的区别：在某些情况下的用法会截然不同

1. 对于 Object 而言，它键（key）的类型只能是字符串，数字或者 Symbol；而对于 Map 而言，它可以是任何类型。（包括 Date，Map，或者自定义对象）
2. Map 中的元素会保持其插入时的顺序；而 Object 则不会完全保持插入时的顺序，而是根据如下规则进行排序:

   - 非负整数会最先被列出，排序是从小到大的数字顺序
   - 然后所有字符串，负整数，浮点数会被列出，顺序是根据插入的顺序
   - 最后才会列出 Symbol，Symbol 也是根据插入的顺序进行排序的

3. 读取 Map 的长度很简单，只需要调用其 .size() 方法即可；而读取 Object 的长度则需要额外的计算： Object.keys(obj).length
4. Map 是可迭代对象，所以其中的键值对是可以通过 for of 循环或 .foreach() 方法来迭代的；而普通的对象键值对则默认是不可迭代的，只能通过 for in 循环来访问（或者使用 Object.keys(o)、Object.values(o)、Object.entries(o) 来取得表示键或值的数字）迭代时的顺序就是上面提到的顺序。
5. JSON 默认支持 Object 而不支持 Map。

### 句法的区别：创建以及增删查改的句法区别

#### Object

```js
// 创建
const o = {} // 对象字面量
const o = new Object() // 调用构造函数
const o = Object.create(null) // 调用静态方法 Object.create

//新增/修改
o.x = 1
o['y'] = 2
//读取
o.x // 1
o['y'] // 2
//或者使用 ES2020 新增的条件属性访问表达式来读取
o?.x // 1
o?.['y'] // 2
//删除
delete o.b
```

#### Map

```js
const m = new Map() // 调用构造函数
//新增/修改
m.set('x', 1)
//读取
map.get('x')
//删除
map.delete('b')
```

对于简单的增删查改来说，Map 上的方法使用起来也是十分便捷的；不过在进行联动操作时，Map 中的用法则会略显臃肿：

```js
const m = new Map([['x', 1]])
// 若想要将 x 的值在原有基础上加一，我们需要这么做：
m.set('x', m.get('x') + 1)
m.get('x') // 2

const o = { x: 1 }
// 在对象上修改则会简单许多：
o.x++
o.x // 2
```

### 性能的区别：速度和内存占用情况

- 创建 Object 的速度会快于 Map。
- 在需要进行很多新增操作，且需要储存许多数据的时候，使用 Map 会更高效。
- 读取元素时，Object 略占优势，但总体差别不大。
- 删除元素时，Map 的速度会略占优，但整体差别其实并不大。

### 总结

通过对比我们可以发现，Map 和 Object 各有千秋，对于不同的情况下，我们应当作出不同的选择。所以我总结了一下我认为使用 Map 和 Object 更为合适的时机。

#### 使用 Map：

- 储存的键不是字符串/数字/或者 Symbol 时，选择 Map，因为 Object 并不支持
- 储存大量的数据时，选择 Map，因为它占用的内存更小
- 需要进行许多新增/删除元素的操作时，选择 Map，因为速度更快
- 需要保持插入时的顺序的话，选择 Map，因为 Object 会改变排序
- 需要迭代/遍历的话，选择 Map，因为它默认是可迭代对象，迭代更为便捷

#### 使用 Object：

- 只是简单的数据结构时，选择 Object，因为它在数据少的时候占用内存更少，且新建时更为高效
- 需要用到 JSON 进行文件传输时，选择 Object，因为 JSON 不默认支持 Map
- 需要对多个键值进行运算时，选择 Object，因为句法更为简洁
- 需要覆盖原型上的键时，选择 Object
- 虽然 Map 在很多情况下会比 Object 更为高效，不过 Object 永远是 JS 中最基本的引用类型，它的作用也不仅仅是为了储存键值对。

### 参考

[JS 项目中究竟应该使用 Object 还是 Map？](https://zhuanlan.zhihu.com/p/358378689)
